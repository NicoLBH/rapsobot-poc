<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RAPSOBOT PoC — UI</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- GitHub-ish top header -->
  <header class="gh-header">
    <div class="gh-header__left">
      <!-- Sidebar toggle (menu) -->
      <button id="sidebarToggle" class="icon-btn" aria-label="Toggle sidebar" title="Toggle sidebar">
        ☰
      </button>

      <a class="gh-brand" href="./" aria-label="RAPSOBOT">
        <img class="gh-brand__logo" src="Logo%20minimaliste%20de%20robot%20en%20noir%20et%20blanc.png" alt="RAPSOBOT" />
        <span class="gh-brand__name">RAPSOBOT</span>
        <span class="gh-brand__sep">/</span>
        <span class="gh-brand__repo">rapsobot-poc</span>
      </a>

      <nav class="gh-tabs" aria-label="Navigation">
        <span class="gh-tab gh-tab--active">Issues</span>
      </nav>
    </div>

    <div class="gh-header__right">
      <div class="sys-status" title="État du système">
        <span class="sys-status__dot" id="sysDot" aria-hidden="true"></span>
        <span class="sys-status__label" id="sysLabel">Idle</span>
        <span class="sys-status__meta" id="sysMeta">—</span>
      </div>
    </div>
  </header>

  <main class="gh-page gh-page--3col">
    <!-- LEFT: Inputs (sidebar-like, retractable) -->
    <section class="gh-sidebar" aria-label="Inputs" id="sidebar">
      <div class="gh-panel__head gh-sidebar__head">
        <h2 class="gh-panel__title">Inputs</h2>
        <div class="gh-head__right">
          <button id="runBtn" class="gh-btn gh-btn--primary">Run analysis</button>
        </div>
      </div>

      <div class="gh-sidebar__section">
        <div class="gh-sidebar__sectionTitle">Paramètres projet</div>

        <label class="gh-field">
          <span class="gh-field__label">Commune + CP</span>
          <input id="communeCp" class="gh-input" type="text" placeholder="ex: 74950 Scionzier" />
        </label>

        <label class="gh-field">
          <span class="gh-field__label">Catégorie d’importance</span>
          <select id="importance" class="gh-input">
            <option value="je ne sais pas">je ne sais pas</option>
            <option value="I">I</option>
            <option value="II">II</option>
            <option value="III">III</option>
            <option value="IV">IV</option>
          </select>
        </label>

        <label class="gh-field">
          <span class="gh-field__label">Classe de sol</span>
          <select id="soilClass" class="gh-input">
            <option value="je ne sais pas">je ne sais pas</option>
            <option value="A">A</option>
            <option value="B">B</option>
            <option value="C">C</option>
            <option value="D">D</option>
            <option value="E">E</option>
            <option value="S1">S1</option>
            <option value="S2">S2</option>
          </select>
        </label>

        <label class="gh-field">
          <span class="gh-field__label">Liquéfaction</span>
          <select id="liquefaction" class="gh-input">
            <option value="je ne sais pas">je ne sais pas</option>
            <option value="non">non</option>
            <option value="oui">oui</option>
          </select>
        </label>

        <label class="gh-field">
          <span class="gh-field__label">Référentiel</span>
          <select id="referential" class="gh-input">
            <option value="Eurocode 8">Eurocode 8</option>
            <option value="PS-MI 89 révisées 92">PS-MI 89 révisées 92</option>
            <option value="CP-MI Antilles">CP-MI Antilles</option>
          </select>
        </label>
      </div>

      <div class="gh-sidebar__divider" role="separator" aria-hidden="true"></div>

      <div class="gh-sidebar__section">
        <div class="gh-sidebar__sectionTitle">Connexion</div>

        <label class="gh-field">
          <span class="gh-field__label">Webhook URL (n8n)</span>
          <input id="webhookUrl" class="gh-input" type="url" placeholder="https://.../webhook-test/rapsobot-poc" />
          <div class="gh-field__help">Peut aussi venir du query param <span class="mono">?webhookUrl=...</span></div>
        </label>

        <label class="gh-field">
          <span class="gh-field__label">PDF (depuis l’ordinateur)</span>
          <input id="pdfFile" class="gh-input" type="file" accept="application/pdf" />
        </label>
      </div>

      <div class="gh-sidebar__divider" role="separator" aria-hidden="true"></div>

      <div class="gh-sidebar__section">
        <div class="gh-sidebar__sectionTitle">Actions</div>
        <div class="gh-actions gh-actions--sidebar">
          <button id="resetBtn" class="gh-btn">Reset</button>
          <div id="runMeta" class="gh-meta mono"></div>
        </div>
        <div id="errorBox" class="gh-alert gh-alert--error hidden"></div>
      </div>
    </section>

    <!-- MIDDLE: Results (DO NOT change style/structure except "Observation" column removed in avis list) -->
    <section class="gh-panel gh-panel--results" aria-label="Results">
      <div class="gh-panel__head gh-panel__head--tight">
        <div class="issues-head">
          <h2 class="gh-panel__title">Issues</h2>
          <div class="issues-totals mono" id="issuesTotals">—</div>
        </div>

        <div class="gh-filters">
          <label class="gh-filter">
            <span>Verdict</span>
            <select id="verdictFilter" class="gh-input gh-input--sm">
              <option value="ALL">All</option>
              <option value="KO">KO</option>
              <option value="A_VERIFIER">A_VERIFIER</option>
              <option value="OK">OK</option>
            </select>
          </label>

          <label class="gh-filter">
            <span>Search</span>
            <input id="searchBox" class="gh-input gh-input--sm" type="text" placeholder="topic / EC8 / mot-clé…" />
          </label>
        </div>
      </div>

      <div id="issuesTable" class="gh-issues emptyState">Run an analysis to display situations.</div>

      <div class="gh-footer">
        <div class="gh-counts" id="counts">—</div>
        <div class="gh-pagination">
          <button id="prevPage" class="gh-btn gh-btn--sm" aria-label="Previous page">◀</button>
          <span id="pageInfo" class="mono">1 / 1</span>
          <button id="nextPage" class="gh-btn gh-btn--sm" aria-label="Next page">▶</button>
        </div>
      </div>
    </section>

    <!-- RIGHT: Details / Discussion -->
    <section class="gh-panel gh-panel--details" aria-label="Details">
      <div class="gh-panel__head gh-panel__head--tight">
        <div class="details-head">
          <h2 class="gh-panel__title">Details</h2>
          <div class="details-meta mono" id="detailsMeta">—</div>
        </div>
      </div>

      <div class="details-body" id="detailsBody">
        <div class="emptyState">Sélectionne une situation / un problème / un avis pour afficher les détails.</div>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
